---
title: "Stat 415 Regression: Classwork/Lab 4"
author: "Frankie Tyndall"
date: '2022-07-11'
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(broom)
library(dplyr)
library(MASS)
```

## Electtricty Consumption

y = household electricity comsumption

x = Number of rooms in home


## The data 

```{r}

x <- c(2,3, 4, 5, 6, 7, 8, 9, 10, 11)
x
ei <- c(3.2, 2.9, -1.7, -2.0, -2.3, -1.2, -0.9, 0.8, 0.7, 0.5)
ei


```

## Plot Residual Vs Predictor.

```{r}
plot(ei ~ x)
```

The problem that exist is that the plot of then residual vs x is not linear and
the variance is not constant. The data is skewed to the right and the transformation that could be used is the X^2 or exp(X) transformations of the 
predictor variable.


## For the bivariate data given below, the residual plots suggest problems involving non-normality or non-constant error variance or both.  Use Box â€“ Cox method as indicated in class to produce a lamda power transformation that will best normalize the data. Your work should include all graphs and plots that support your final answer.  Use a series of steps and reasoning demonstrated in class.

```{r}
x <- c(7, 7, 8, 3, 2, 4, 4, 6, 6, 7, 5, 3, 3, 5, 8)
x

y <- c(1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 6, 7, 8)
y

plot(y ~ x)

model <- lm(y ~ x)
model

box_cox <- boxcox(y ~ y)
box_cox

lambda <- box_cox$x[which.max(box_cox$y)]
lambda

# fit new linear regression

new_model <- lm(((y^lambda-1)/lambda) ~ x)
new_model

# old model

qqnorm(model$residuals) 
qqline(model$residuals) 


# new model 

qqnorm(new_model$residuals) 
qqline(new_model$residuals) 

```
